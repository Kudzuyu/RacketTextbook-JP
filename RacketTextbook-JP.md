# Racket日本語テキスト

## 0.序文
### この文書について
この文書は、現在日本語の情報が少ないプログラミング言語Racketについて、プログラミング初心者の方でもわかりやすいように解説し、Racketのプログラミングがある程度できるようになるところまで持っていくことを目指しています。これからプログラミングを始める人のために経験者の方には少し表現がくどくなっているかもしれませんが、ご了承ください。

### はじめに-RacketとLisp
1950年代に、ジョン・マッカーシーにより、Lispというプログラミング言語が作られました。Lispは当時の主流であったプログラミング言語(FortranやCobolなど)とは構造がかけはなれていたため、あまり流行ることもなく、また当時のコンピュータの処理性能にたいしては重たい言語であったためさほど普及しませんでしたが、他の言語にはない様々な機能があったため、人工知能などの研究用として残りつづけました。
Lispはその後、2つの大きな方言(元のプログラミング言語にたいし基本構造はかわらないが、細かな違いや改良がみられるプログラミング言語)を産みました。Common LispとSchemeです。それぞれに目指しているものが違い、Common Lispは多機能で様々なプログラムができるように、Schemeは言語としてのシンプルさを追求していました。
Racketは、Schemeから派生したLisp方言の1つです。かつてはPLT Schemeと呼ばれていました。RacketはSchemeの機能を取りいれつつかなり多機能な言語となっており、Common LispとSchemeの中間的存在と言えるかもしれません。

#### Racketの特徴
* RacketはSchemeから派生したため、Schemeとよく似ています。そのため、Schemeを強化するために作られたライブラリ集srfiを組み込んで使うことができます。（現在Racketで使えるsrfiは、[Racketのsrfiのページ](http://docs.racket-lang.org/srfi/index.html)を参照してください。）
* RacketにはデフォルトでGUIの開発に必要な関数郡が揃っています。これにより、これまでのCommon LispやSchemeでは環境をそろえることすら難しかったGUIについて、手軽に触れることができるようになっています。

### Racketプログラミングのための準備
Racketは公式がプログラミング用のソフト(IDE)を配布しているので、とりあえずはこれを使うことをお勧めします。自分のお気に入りのエディタがあるひとは、それを使ってもいいとおもいますが、マイナーな言語ですので、エディタによっては、シンタックスハイライト(ソースコードの色分けや、文法ミスの検出などの機能のこと。ソースコードを見やすくするためのもので、なくても問題はありませんがあったほうが捗ります)がないこともあります。

#### インストール
* **Windows** <br>
[Racket公式サイト](http://racket-lang.org)にアクセスし、画面上部の「Download」をクリック。Distributionが「Racket」、PlatformがWindowsであることを確認して、ダウンロード。exe形式なので、そのままインストールしてください。一応ミラーサイトもあります。

* **Linux(Debian,Ubuntu系)** <br>
Windowsと同じようにRacketの公式サイトからダウンロードする方法と、aptリポジトリを使う方法があります。リポジトリは ppa:plt/racketです(公式リポジトリで、アップデートを自動でやってくれるためこちらのほうがおすすめです。)


* **Minimal RacketとRacketの違いについて**  
  Racketをダウンロードするときに、Minimal Racketというものが選択肢にあるとおもいます。これは、Racketとしての必要最低限の機能だけを搭載し、あとからパッケージという形でRacketに機能を追加できるようにしたパッケージです。この文書は、普通のRacketを導入することを前提で書いていますので、特に理由がなければRacketをダウンロードすることをおすすめします。

#### 起動および日本語化  
インストールすると、ソフト一覧に、DrRacketが追加されると思います。これがRacketのIDEです。この記事では、これを使ってプログラミングすることを想定して書かれています。他のエディタを使っている人は、適宜読みかえてください。 <br>
さて、DrRacketを起動すると、英語版として立ちあがるかもしれません。このままでも問題はありませんが、日本語がいいという方は、メニュータブの右端「Help」をクリックしてください。さまざまな言語でかかれたメニューの中に、「DrRacketを日本語で使う」というのがあると思います。クリックすると、DrRacketを再起動するか聞かれるので、承認して再起動させましょう。これを行なうことで、それ以降はDrRacketを日本語で使えるようになります。

では、次の章から、Racketによるプログラミングを始めていきましょう。

## 1.プログラミングRacket Racket基礎編
ここでは始めにRacketの派生元であるSchemeについて解説し、その後Racket特有又は、Schemeとの相違点について解説します。

### Racket基礎その1 Hello World!とリストに関する各種名称

#### まずはお決まり、Hello World!
DrRacketを起動させると、#lang racket と書かれたエディタ部分、その下の、シェルの部分が目につくと思います。これは、Lisp系の言語の開発環境にはかならずといっていいほど付属する対話環境とよばれるものです。他のプログラミング言語とはすこし違いますが、使っていくうちになれます。

それでは、Racketのプログラミングを始めていきましょう。まずは、色々な言語で最初にやる画面に「Hello World!」と表示するプログラムを作ってみましょう。以下のコードを書きこんでください。全ての文字は、半角を使用してください。(#lang racketの部分は、もとから書かれていますので、これ以降は基本省略します)

```racket
#lang racket

(display "Hello World!")

```
書き込んだら実行してみましょう。ソフト上部の「実行」と書かれた緑色の三角形のボタンを押してください。(保存しなくても実行できます。)
実行すると、画面下部の対話環境に、以下の様に表示されると思います。
エラーメッセージがでた人は、カッコが半角であるかや、全角空白が入っていないかどうかを確認してください。
```racket
Hello World!
>
```

では、このプログラムについてみていきましょう。
Racketの世界では、全てのプログラムおよびデータは()-丸カッコでくくられます。これをリストといいます。Racketの世界では、プログラムとプログラムで扱うデータを同じようにリストで表現します。このうち、プログラムとしてのリストは、先頭の要素および残りの要素に大別されます。このプログラムでいうと、「write」が先頭の部分にあたり、「"Hello World!"」が残りの部分にあたります。プログラムとしてのリストの先頭と残りには、それぞれ役割があります。先頭の要素がプログラムの名前であり、残りの要素が「引数(ひきすう)」と呼ばれる、そのプログラムの動作を決定するものです。
このプログラムの場合、「display」というのが画面に文字を入力せよという命令(関数といいます)であり、「"Hello World!"」がdisplayに対する引数となっています。
"Hello World"の""の中を自分の好きな文字列に変えて、実行してみてください。自分の入れた文字列が表示されたはずです。displayという命令が変わっていないので画面に文字列を出力するということは同じですが、引数が違うため微妙に動作が違うのです。


#### Racketの構造
先ほど、関数とデータが、同じリストという構造でできているという話がありました。今度は、Racketのデータについても見ていきましょう。
Racketでは、リストを次のように書きます。次のリストは、a、b、cの3つのアトムをもつリストです。(アトムは、リストの一つの一つの要素のことをさします。丸カッコはアトムには含まれません。)
```racket
(a b c)
```
リストは多層構造にもできます。次のリストは、1年の各月とその月の最終日を表わしたリストです。アトムは、リストの中の、
```racket
((1 31)(2 28)(3 31)(4 30)(5 31)(6 30)(7 31)(8 31)(9 30)(10 31)(11 30)(12 31))
```

リストの先頭要素が関数であった場合に、その関数を実行することを評価といいます。さきほどの
```racket
(display "Hello World!")
```
のプログラムは、関数「display」に引数「"Hello World!"」を評価させていたということです。
では、このdisplayに、データとしてのリストを与えてみましょう。
```racket
(display (1 2))
```
これを実行すると、エラーがでます。
```racket
. . application: not a procedure;
 expected a procedure that can be applied to arguments
  given: 1
  arguments.:
>
```
このエラーは、リストを引数に与えたからでたわけではありません。引数として与えられたリストの先頭のアトムが、関数でなかったからおきたものです。  
プログラムを実行すると、Racketはリストの先頭の要素を見にいきます。displayはRacketで関数として登録されているので、その定義にしたがってリストの残りの要素を画面に出力しようとします。すると、残りの要素はリストということになりました。このときRacketは、そのリストを評価しにいきます。このプログラムでは、(1 2)の部分です。しかし先頭の要素が「1」で、関数ではないためRacketは評価ができず、エラーを返したのです。
では、このような場合にはどうすればいいでしょうか。次のプログラムを見てください。
```racket
(display '(1 2))
```
このプログラムを実行すると、エラーが出ずに、(1 2)と出力されます。実は、リストの前に'(クオート)を付けるとRacketはそのリストを単なるデータとみなし、評価をしないのです。
皆さんも様々なリストを入れてみてください。なお、Hello worldの時のように"(1 2)"としても出力することができますが、リストに対しては、'を使ったほうが便利なことが多いので、リストに対してはこちらを使っていきましょう。

#### まとめ
* Racketはリストとよばれる()を使った構造で、プログラムやデータを書く。
* リストの各要素は、アトムと呼ばれる。
* リストは、多層構造にすることができる。
* Racketのプログラムを実行すると、リストの先頭の要素は
* リストを評価するとcar部を関数としcdr部を引数として実行する。
* リストを評価されたくない時は、前カッコの前に'(クオート)をつける。


### Racket基礎その2 リストの操作とアトムについて
#### 対話環境の使い方
さて、前回まではエディタ部分にプログラムを書いて実行してきました。しかし、(display '(1 2))などとかいて、一々実行するのも面倒です。ここで、すこし手間を省きましょう。これまでプログラムを実行すると、下の対話環境に出力されていましたが、そこに直接プログラムを書いてみましょう。次のプログラムを書いて、エンターキーを押してください。
```racket
>(display '(one two three))
'(one two three)
```
エディタ部分に書いて実行したときと同じように、displayが実行されました。このように対話環境は、テキストに書かれたプログラムの実行だけでなく、直接プログラムを実行することもできるのです。
今の所、対話環境だけで押し通してもRacketの習得上問題はないので、当分は手軽に対話環境にプログラムを直接打ち込む方式でいきましょう。(プログラムをテキストに書きこむ方式がいいという人は、別にかまいません。結果がかわるわけではありませんから)やがてテキストに書くプログラムが必要になったら、あらためてテキストに戻ることにしましょう。
#### リスト操作のおきまり、carとcdr
では、今回の本題です。リストの操作を覚えましょう。次のプログラムを実行してください。
```racket
(car '(a b c))
```

```lisp
(cdr '(a b c))
```

いかがでしたでしょうか。それぞれリストの先頭の部分「a」および残りの部分「’(b c)」が出力されたと思います。クダー部のリストに'がついているのは、評価前のリストがすでに'で評価されないようにしていたからです。また、カー部であるaの方に'がついていないのは、数字に関しては評価しないという取り決めがあるからです。(先程のdisplayとは、出力時の文字の色が違うかもしれませんが、いまは気にしないでください)
これらの関数はRacketの先祖であるLispができたころから存在していたいにしえの関数です。Racketに限らずLisp系の言語はリストの操作にこの名前を使っている名前が多いです。
これまでリストを先頭の要素と残りの要素というふうに分けてきましたが、これらの関数名に従い、これからはそれぞれ先頭の要素をcar(カー)、残りの要素をcdr(クダー)と呼ぶことにします。
リストは、多層構造にすることもできるという話をしました。では、次のプログラムを見てください。

```racket
(car '((1 2)(3 4)))
```

```racket
(cdr '((dog)(cat (mouse rabbit))))
```
これを実行すると
```racket
>(car '((1 2)(3 4)))
(1 2)
>(cdr '((dog)(cat (mouse rabbit))))
(cat (mouse rabbit))
```
このようになりました。リストが多層構造になっている時に、carやcdrをとると、リストの中のリストは、
それでは練習問題です。以下のリストについてcarとcdrを推測してください。
```racket
(1 2 3 4 5)
((1 2)(3 4))
(((1))(1 2))
```
carとcdrを考える時のコツは、リストの一番外側の「(」前カッコを、右に一つずらすということです。
答えはこの章の最後にまとめてあります。各自でもcarやcdrで確認しましょう。

ではもうひとつ、
```racket
()
```
これは、空リストとよばれるもので、要素を1つも持たないリストです。要素が0個のリストともいえますね。では、このリストのcarとcdrを取るとどうなるでしょう。

```racket
>(car '())

>(cdr '())
```
どちらもエラーがでました。Racketでは空リストのcarやcdrをとってはいけないことになっています。これは後々条件分岐の所で重要になってきますので、気にとめておいてください。(他のLisp系言語をやったことのあるひとは、空リストのcdrがエラーになることや、nilが出ないことなどに違和感をいだくかもしれませんが、割りきってください)
Racketの定義では、car とcdrは、1つ以上のアトムを含むリストを引数にとることとなっています。

#### まとめ


#### 練習問題の解答

### Racket基礎その3 算術計算と条件演算子

### 関数定義で初心者脱出

### 条件分岐は多種多様

### 繰り返しと再起定義

## 2.プログラミングRacket ソフトウェア開発編
